module test

language c18

test parse [[
  int main(void) { }
]] parse succeeds

test parse mixed declarations and statements [[
  int main(void) {
    printf("Test...");
    int code = 0;
    exit(code);
  }
]] parse succeeds

test parse static thread-local object [[
  static _Thread_local struct stat st;
]] parse succeeds


test parse bool object [[
  _Bool bool;
]] parse succeeds


test parse complex object [[
  _Complex thing;
]] parse succeeds

test bitfield in struct [[
  struct packed_thing {
    int flags : 3;
    int type : 3;
    int op : 2;
  };
]] parse succeeds

test parse automic qualifier [[
  static _Atomic int lock;
]] parse succeeds

test parse noreturn inline [[
  _Noreturn inline fail(const char *);
]]

test parse alignof expr [[
  int main(void) {
    printf("%llu\n", _Alignof(0));
  }
]]

test parse alignof type [[
  int main(void) {
    printf("%llu\n", _Alignof(int));
  }
]]

test parse imaginary [[
  _Imaginary number;
]]
